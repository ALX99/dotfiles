#!/bin/sh

alias \
  ch="code . && exit" \
  cx="chmod +x" \
  wlist="nmcli d w l" \
  bye='systemctl hibernate' \
  share="getip; oneshot -p 8080 -a zip" \
  utop='htop -t -u $(whoami)' \
  perms="stat -c '%a %n' *" \
  mimetype="file --dereference --brief --mime-type" \
  copyfile="xclip -selection clipboard" \
  yt-archive="youtube-dl -f best -o '%(playlist)s/%(playlist_index)s - %(title)s.%(ext)s' --write-info-json" \
  archive="7z a -m0=LZMA2 -mx=9 -mmt\$(nproc) archive.7z" \
  update="p -Syu" \
  gf='fd -t f | fzf --preview "bat --color=always --style=numbers --line-range :200 {}" --bind "enter:execute(code {})"' \
  gu="xdg-open \$(git config --get remote.origin.url)" \
  gmod='go list -m all | fzf --height 40% --color --preview "go mod why -m \$(echo {} | cut -f 1 -d'"'"' '"'"')"'

# Helm
alias hls="helm ls" \
  hdu="helm dependency update" \
  hui="helm upgrade --install" \
  hur="helm upgrade --reuse--values" \
  hua='helm uninstall "$(helm ls --short)"'

# Kubectl
alias krc='kubectl config current-context' \
  krn='kubectl config get-contexts --no-headers "$(krc)" | awk "{print \$5}" | sed "s/^$/default/"' \
  kln='kubectl get -o name ns | sed "s|^.*/|  |;\|^  $(krn)$|s/ /*/"' \
  ksn='kubectl config set-context --current --namespace' \
  kdcn='command kubectl delete ns "$(krn)"' \
  kccn='command kubectl create ns "$(krn)"'

# Docker
alias drr="docker run -it --rm" \
  dprune="docker system prune -a"

# Git
alias gco="git checkout" \
  gcb="git checkout -b" \
  gbd="git branch -D" \
  gbl="git branch" \
  gsb="git switch" \
  gpr="git pull --rebase" \
  gca="git commit --amend" \
  gsp="git stash push" \
  gspm="git stash push -m" \
  gsP="git stash pop" \
  push="git push origin HEAD:refs/for/master" \
  gca="git commit --amend" \
  gulc="git reset HEAD~" \
  gtags='git log --tags --simplify-by-decoration --pretty="format:%ai %d"'

# Make common commands shorter
alias \
  q="exit" \
  c="clear" \
  s="sudo" \
  e="\$EDITOR" \
  p="paccy" \
  g="git" \
  se="sudoedit" \
  sp="sudo pacman" \
  gc="git clone" \
  lt="trash-list" \
  t='trash-put' \
  rt='trash-restore' \
  ct='trash-empty' \
  please='sudo !!' \
  sshp='ssh -o "StrictHostKeyChecking=no" -o PreferredAuthentications=password -o PubkeyAuthentication=no' \
  ssh='ssh -o "StrictHostKeyChecking=no"' \
  gop='CGO_ENABLED=0 go install -v -a -ldflags "-s -w" -gcflags=all=-trimpath=$(pwd) -asmflags=all=-trimpath=$(pwd)' \
  gob='CGO_ENABLED=0 go build -v -a -ldflags "-s -w" -gcflags=all=-trimpath=$(pwd) -asmflags=all=-trimpath=$(pwd)' \
  gor='go run'

# Better flags
alias \
  grep="grep --color=auto" \
  diff="diff --color=auto" \
  ls="ls -hN --color=auto --group-directories-first" \
  cp="cp -i" \
  mv="mv -i" \
  rm="rm -v" \
  mkdir="mkdir -p" \
  free="free -h" \
  df="df -h" \
  upower="upower -i /org/freedesktop/UPower/devices/battery_BAT0" \
  dd="dd bs=512k" \
  gcc="gcc -Wall -W -pedantic" \
  htop="htop -s PERCENT_CPU"

alias \
  ..='cd ..' \
  ...='cd ../..' \
  ....='cd ../../..' \
  h='cd ~' \
  bin='cd ~/dotfiles/.local/bin' \
  dl='cd ~/Downloads' \
  dots='cd ~/dotfiles' \
  config='cd ~/dotfiles/.config'

[ -x "$(command -v bat)" ] && alias cat="bat"
